<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Test</title>
    <script>
        var start = new Date();
        function println(content) {
            document.writeln(content);
        }
        function sleep(time) {
            for (let sleep_start = Date.now(); Date.now() - sleep_start < time;);
        }

    </script>
    <style>
/* 
        pre:has(>script){
            border:medium double black;
        } */

        * {
            scroll-behavior: smooth;
            /* overflow-wrap: break-word; */
        }

        #cookiedata {
            min-height: 150px;
            /* background-color: antiquewhite; */
            border: thin solid black;
        }

        #readyState{
            color:red;
        }
    </style>

</head>

<body>
    <header>
        <pre>ReadyState: <b id="readyState">loading...</b></pre>
        <script>
            var readyState = document.getElementById("readyState");
            document.onreadystatechange = function () {
                if(document.readyState=="interactive"){
                    let elePre= document.querySelectorAll("pre");
                    for(let i=0;i<elePre.length;i++)
                        if(elePre[i].innerText)
                            elePre[i].style.border="medium double black";
                }
                if(document.readyState=="complete") {
                        readyState.style.color = "green";
                        var now = new Date();
                        var dif = now - start;
                        if (dif >= 100)
                            readyState.innerHTML = document.readyState + " in " + dif / 1000 + " seconds";
                        else
                            readyState.innerHTML = document.readyState + " in " + dif + " ms";
                }
                // sleep(1000);
            }
        </script>
        <pre><script defer id="child">
            // println("Process: "+document.readyState);
            println("Charset: " + document.charset);
            println("Compat Mode: " + document.compatMode);
            println("Protocol: " + document.location.protocol);
            println("Hostname: " + document.location.hostname);
            println("Port: " + document.location.port);
            println("Pathname: " + document.location.pathname);
            println("Search: " + document.location.search);
            println("Hash: " + document.location.hash);
            println("URL(location): " + document.location);

        </script></pre>
        <!-- <script delay>
            var child = document.getElementById('child');//  获取子元素
            var parent = document.createElement('pre');//  新建父元素
            parent.className = 'parent';
            child.parentNode.replaceChild(parent, child);//  获取子元素原来的父元素并将新父元素代替子元素
            parent.appendChild(child);//  在新父元素下添加原来的子元素
        </script> -->

    </header>

    <main>
        <button id="toEnd" type="button">Nav To End</button>
        <div id="cookiedata"></div>
        <button id="write" type="button">Add Cookie</button>
        <button id="update" type="button">Update Cookie</button>
        <button id="reset" type="button">Reset Cookies</button>
        <script>
            var cookieCount = 0;
            document.getElementById("write").onclick = createCookie;
            document.getElementById("update").onclick = updateCookie;
            document.getElementById("reset").onclick = resetCookies;
            readCookies();

            function readCookies() {
                document.getElementById("cookiedata").innerHTML = document.cookie;
            }

            function createCookie() {
                var times = prompt("Input add how many cookies:");
                if (!times) return;
                for (let i = 0; i < times; i++) {
                    cookieCount++;
                    document.cookie = "Cookie_" + cookieCount + "=Value_" + cookieCount;//+ ";max-age=2";
                    readCookies();
                }
                document.location.hash = "cookiedata";
            }

            function updateCookie() {
                let num = prompt("Change which cookie (Number):");
                if (!num) return;
                let value = prompt("Input value:");
                if (!value) return;
                document.cookie = "Cookie_" + num + "=" + value;
                readCookies();
            }

            function resetCookies() {
                var keys = document.cookie.match(/[^ =;]+(?=\=)/g);
                if (keys) {
                    for (var i = keys.length; i--;)
                        document.cookie = keys[i] + '=0;expires=' + new Date(0).toUTCString()
                }
                cookieCount = 0;
                readCookies();
            }

        </script>

        <pre><script>
            document.getElementById("toEnd").onclick = function () {
                document.location.hash = "end";
                // How to reload onhashchange?
            }
        </script></pre>

    </main>

    <footer id="end">
        <pre><script>
            // document.writeln("<pre>")
            println("Last Modified: " + document.lastModified);
            // document.write("</pre>")
        </script>
        </pre>
    </footer>




</body>

</html>